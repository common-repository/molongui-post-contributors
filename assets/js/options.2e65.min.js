jQuery(document).ready(function(t){t("#molongui-help-ticket-form").submit(function(o){o.preventDefault();var e=0,i=t("#molongui-submit-ticket"),n=i.html();if(t("#molongui-form-error").hide(),t("#molongui-help-ticket-form input, #molongui-help-ticket-form select, #molongui-help-ticket-form textarea").each(function(){t(this).removeClass("has-error"),t(this).val()||(t(this).addClass("has-error"),++e)}),t("#molongui-accept-tos").is(":checked")?t("#molongui-accept-tos").removeClass("has-error"):(t("#molongui-accept-tos").addClass("has-error"),++e),0<e)return t("#molongui-form-error").show(),!1;t.ajax({url:ajaxurl,type:"POST",data:{action:"molongui_send_mail",type:"ticket",form:t(this).serialize(),domain:document.domain,security:t("#molongui-support-nonce").val()},beforeSend:function(){i.empty().html('<div class="m-typing-loader"></div>')},success:function(o){"sent"===o?(t(this).trigger("reset"),i.empty().html(n),t("#molongui-help-ticket-form").trigger("reset"),molongui_swal({icon:"success",title:"Sent!",text:"Your ticket has been submitted. We reply to every ticket, please check your Spam folder if you haven't heard from us."})):(console.log("Molongui Error: "+o),i.empty().html(n),molongui_swal({icon:"error",title:"Ooops... error!",text:"Is your site correctly configured to send emails? Check browser's console to know what had happened.\n If the problem persists, contact Molongui using the live chat."}))},error:function(o,e,t){console.log("Molongui Error: "+o.responseText),i.empty().html(n),molongui_swal("Ooops!","Something went wrong and the ticket could not be sent.\n If the problem persists, please contact Molongui by chat.","error")}})}),t("#send-molongui-support-report").click(function(o){o.preventDefault();var i=t(this),n=t(this).html();t(this).html('<div class="m-typing-loader"></div>'),molongui_swal({title:"Send report?",text:"Submit only if instructed so by the Molongui Support Team.",icon:"info",closeOnEsc:!0,buttons:{cancel:{text:"No, cancel!",value:null,visible:!0,className:"",closeModal:!0},confirm:{text:"Yes, send it!",value:!0,visible:!0,className:"",closeModal:!1}}}).then(o=>{o?t.ajax({url:ajaxurl,type:"POST",data:{action:"molongui_send_mail",type:"report",domain:document.domain,security:t("#molongui-support-nonce").val()},success:function(o){"sent"===o?(i.html(n),molongui_swal({title:"Sent!",text:"Your report has been sent successfully.",icon:"success"})):(console.log("Molongui Error: "+o),molongui_swal({title:"Ooops... error!",text:"Is your site correctly configured to send emails? Check browser's console to know what had happened.\n If the problem persists, contact Molongui using the live chat.",icon:"error"}),i.html(n))},error:function(o,e,t){console.log("Molongui Error: "+o.responseText),molongui_swal("Ooops!","Something went wrong and the report could not be sent.\n If the problem persists, please contact Molongui.","error"),i.html(n)}}):i.html(n)})})}),jQuery(document).ready(function(l){function s(o){return o.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'")}l("#molongui-options").on("click","#activate_license_button",function(){event.preventDefault();var i,n=l(this),e=l("#key"),t=l("#product_id"),o=e.val().trim(),a=t.val().trim();return o&&a?Math.floor(a)==a&&l.isNumeric(a)?(i=l(this).html(),l(this).html('<div class="m-typing-loader"></div>'),void l.ajax({url:ajaxurl,type:"POST",data:{action:molongui_contributors_options_params.plugin_id+"_activate_license_key",nonce:molongui_contributors_options_params[2e4],key:o,pid:a},success:function(o){o=l.parseJSON(o);console.log("%cMOLONGUI LICENSING SERVER RESPONSE\n%c"+s(o[0])+"\n%c"+s(o[1]),"font-weight: bold; text-decoration: underline;","text-transform: capitalize; color: red;",""),"success"===o[0]?molongui_swal({icon:"success",title:molongui_contributors_options_params[20003],text:o[1]}).then(o=>{e.closest(".m-option").removeClass("m-license-off").addClass("m-license-on"),t.closest(".m-option").removeClass("m-license-off").addClass("m-license-on"),n.attr("id","deactivate_license_button").removeClass("is-primary").addClass("m-deactivate").html(molongui_contributors_options_params[20015]),n.off("click"),l("#molongui-options").attr("style","opacity: 0.35"),l("#m-options-saving").fadeIn(),l(window).off("beforeunload"),location.reload(!0),window.location.assign(molongui_contributors_options_params.options_page)}):molongui_swal({icon:"error",title:molongui_contributors_options_params[20004],content:{element:"span",attributes:{innerHTML:s(o[1])}}}).then(o=>{n.html(i),e.closest(".m-option").addClass("m-license-off"),t.closest(".m-option").addClass("m-license-off")}),l(this).html(l(this).prop("title"))},error:function(o,e,t){console.error(JSON.stringify(o)),console.error("AJAX Error: textStatus  = "+e),console.error("AJAX Error: errorThrown = "+t),molongui_swal(molongui_contributors_options_params[20005],molongui_contributors_options_params[20006],"error").then(o=>{n.html(i)})}})):(molongui_swal({icon:"error",title:molongui_contributors_options_params[20016],text:molongui_contributors_options_params[20017]}),!1):(molongui_swal({icon:"error",title:molongui_contributors_options_params[20001],text:molongui_contributors_options_params[20002]}),!1)}),l("#molongui-options").on("click","#deactivate_license_button",function(){event.preventDefault();var i=l(this),e=l("#activation_key"),t=l("#activation_email"),n=l(this).html();l(this).html('<div class="m-typing-loader blue"></div>'),molongui_swal({icon:"info",title:molongui_contributors_options_params[20007],text:molongui_contributors_options_params[20008],closeOnEsc:!0,buttons:{cancel:{text:molongui_contributors_options_params[20009],value:null,visible:!0,className:"",closeModal:!0},confirm:{text:molongui_contributors_options_params[20010],value:!0,visible:!0,className:"",closeModal:!1}}}).then(o=>{o&&l.ajax({url:ajaxurl,type:"POST",data:{action:molongui_contributors_options_params.plugin_id+"_deactivate_license_key",nonce:molongui_contributors_options_params[2e4],form:l("form#molongui-settings-form").serializeArray()},success:function(o){console.log("MOLONGUI LICENSING SERVER RESPONSE: "+o.replace(/<\/?[^>]+>/gi,""));o=l.parseJSON(o);"success"===o[0]?molongui_swal({icon:"success",title:molongui_contributors_options_params[20011],text:o[1]}).then(o=>{e.val("").closest(".m-option").removeClass("m-license-on"),t.val("").closest(".m-option").removeClass("m-license-on"),i.attr("id","activate_license_button").removeClass("m-deactivate").addClass("is-primary").html(molongui_contributors_options_params[20014]),i.off("click"),l("#molongui-options").attr("style","opacity: 0.35"),l("#m-options-saving").fadeIn(),l(window).off("beforeunload"),location.reload(!0),window.location.assign(molongui_contributors_options_params.options_page)}):molongui_swal({icon:"error",title:molongui_contributors_options_params[20012],text:o[1]}).then(o=>{i.html(n)})},error:function(o,e,t){console.error(JSON.stringify(o)),console.error("AJAX Error: textStatus  = "+e),console.error("AJAX Error: errorThrown = "+t),molongui_swal(molongui_contributors_options_params[20005],molongui_contributors_options_params[20013],"error").then(o=>{i.html(n)})}})}),i.html(n)})}),function(s){s(function(){var n;s(".m-section-nav__mobile-header").on("click",function(){s(this).parent().toggleClass("is-open")}),s(".m-section-nav__panel").on("click",function(){s(this).parent().removeClass("is-open")}),s(".m-section-nav-tab__link").on("click",function(o){o.preventDefault();o=s(this).attr("href");s(".m-section-nav-tab").removeClass("is-selected"),s(this).parent().addClass("is-selected"),s(".m-section-nav__mobile-header").html(s(this).find(".m-section-nav-tab__text").text()),s(".m-tab").removeClass("current"),s(o).addClass("current"),s(document).trigger("m_settings_tab_changed",[o.replace(/^#/,"")])}),s(".ui.dropdown").dropdown().dropdown({selector:{input:'> input[type="hidden"], > input[type="text"], > select'},message:{noResults:"<strong>No more options available.</strong>"}}),s(".m-support-info").popup({inline:!0,hoverable:!0,position:"left center",delay:{show:300,hide:600}}),n=[],["custom_css","custom_php"].forEach(function(o){var e,t,i=document.getElementById(o);i&&(wp.codeEditor.initialize(i,molongui_contributors_options_params.cm_settings[o]),e=jQuery("#"+o),t=e.next(".CodeMirror").get(0).CodeMirror,s(document).on("m_settings_tab_changed",function(o,e){"advanced"===e&&t.refresh()}),t.on("change",function(){e.val(t.getValue())}),n.push({textareaId:o,editorInstance:t}),"custom_php"===o)&&""===t.getValue()&&t.setValue("<?php\r\n\r\n// Add your code snippet here...")}),s("#enable_custom_php_in_admin").click(function(o){if(s(this).is(":checked")){let e=s(this),t=document.createElement("div");t.innerHTML="If the code contains errors and causes a fatal error, you may lose access to your dashboard. However, you can recover from this situation by appending the <code>?nophpContributors</code> argument to the end of your wp-admin URL.",molongui_swal({title:"Are you sure?",content:t,icon:"warning",closeOnEsc:!0,buttons:{cancel:{text:"Don't activate it",value:null,visible:!0,className:"",closeModal:!0},confirm:{text:"Yes, proceed!",value:!0,visible:!0,className:"",closeModal:!1}}}).then(o=>{o?(t.innerHTML="Refresh this page to apply changes. And remember you can add the <code>?nophpContributors</code> string to the end of your wp-admin URL to void this setting and fix any issue your custom snippet may have caused.",molongui_swal({title:"Setting enabled",content:t,icon:"success"})):e.removeAttr("checked")})}}),s("#export_options").on("click",function(o){o.preventDefault();let i=s(this),n=s(this).html();s(this).html('<div class="m-typing-loader blue"></div>'),jQuery.post(ajaxurl,{action:molongui_contributors_options_params.plugin_id+"_export_options",plugin:molongui_contributors_options_params.plugin_id,nonce:s("#mfw_export_options_nonce").val()},function(o){var o=new Blob([o],{type:"application/json"}),o=URL.createObjectURL(o),e=(new Date).toISOString().slice(0,10),t=document.createElement("a");t.download="molongui-"+molongui_contributors_options_params.plugin_id+"-settings."+e+".json",t.href=o,document.body.appendChild(t),t.click(),document.body.removeChild(t),i.html(n)})}),s("#import_options").on("change",function(o){let n=o.target.files[0];if(void 0===n&&!n)return molongui_swal({icon:"error",title:molongui_contributors_options_params[10012],text:molongui_contributors_options_params[10013]}),!1;s(this);let a=s(this).next("label"),l=a.html();if(a.html('<div class="m-typing-loader blue"></div>'),"text/json"!==n.type&&"application/json"!==n.type)return molongui_swal({icon:"error",title:molongui_contributors_options_params[10014],text:molongui_contributors_options_params[10015]}).then(o=>{a.html(l)}),!1;molongui_swal({icon:"info",title:molongui_contributors_options_params[10016],text:molongui_contributors_options_params[10017],closeOnEsc:!0,buttons:{cancel:{text:molongui_contributors_options_params[10018],value:null,visible:!0,className:"",closeModal:!0},confirm:{text:molongui_contributors_options_params[10019],value:!0,visible:!0,className:"",closeModal:!1}}}).then(o=>{var e,t,i;o?(o=n,e=function(o){s.ajax({url:ajaxurl,type:"POST",data:{action:molongui_contributors_options_params.plugin_id+"_import_options",nonce:molongui_contributors_options_params[10011],file:o,id:molongui_contributors_options_params.plugin_id,version:molongui_contributors_options_params.plugin_version},success:function(o){if(o){var e="";switch(o){case"file":e=molongui_contributors_options_params[10023];break;case"plugin":e=molongui_contributors_options_params[10024];break;case"update":e=molongui_contributors_options_params[10025]}molongui_swal({icon:"error",title:molongui_contributors_options_params[10022],text:e}).then(o=>{a.html(l)})}else molongui_swal({icon:"success",title:molongui_contributors_options_params[10020],text:molongui_contributors_options_params[10021]}).then(o=>{s(window).off("beforeunload"),location.reload()})},error:function(o,e,t){molongui_swal({icon:"error",title:molongui_contributors_options_params[10022],text:molongui_contributors_options_params[10030]}).then(o=>{a.html(l)})}})},(i=new FileReader).onload=function(o){t=i.result,e(t)},i.readAsText(o)):a.html(l)}),o.preventDefault()}),s("#reset_options").on("click",function(o){if("0"===molongui_contributors_options_params.is_pro)return molongui_swal({icon:"error",title:molongui_contributors_options_params[1],text:molongui_contributors_options_params[2]}),!1;var i=s(this),n=s(this).html();s(this).html('<div class="m-typing-loader blue"></div>'),molongui_swal({icon:"info",title:molongui_contributors_options_params[10016],text:molongui_contributors_options_params[10026],closeOnEsc:!0,buttons:{cancel:{text:molongui_contributors_options_params[10018],value:null,visible:!0,className:"",closeModal:!0},confirm:{text:molongui_contributors_options_params[10019],value:!0,visible:!0,className:"",closeModal:!1}}}).then(o=>{o?s.ajax({url:ajaxurl,type:"POST",data:{action:molongui_contributors_options_params.plugin_id+"_reset_options",nonce:molongui_contributors_options_params[10027],id:molongui_contributors_options_params.plugin_id},success:function(o){o?molongui_swal({icon:"success",title:molongui_contributors_options_params[10020],text:molongui_contributors_options_params[10028]}).then(o=>{s(window).off("beforeunload"),location.reload()}):molongui_swal({icon:"error",title:molongui_contributors_options_params[10022],text:molongui_contributors_options_params[10029]}).then(o=>{i.html(n)})},error:function(o,e,t){molongui_swal({icon:"error",title:molongui_contributors_options_params[10022],text:molongui_contributors_options_params[10030]}).then(o=>{i.html(n)})}}):i.html(n)}),o.preventDefault()})}),s(".m-option.has-notice").on("change",function(o){s(this).closest(".m-option").find(".m-option-notice").show()}),s(".m-button-global.m-button-advanced").on("click",function(o){o.preventDefault(),s('[data-m-option="advanced"]').fadeToggle()}),s(".m-button-advanced").on("click",function(o){o.preventDefault(),this.blur();let e=s(this).data("m-state");e="hidding"===e?(s(this).html("Hide Advanced"),s(this).data("m-state","showing"),0):(s(this).html("Show Advanced"),s(this).data("m-state","hidding"),1),s('[data-m-option="advanced"][data-m-group="'+s(this).data("m-target")+'"]').attr("data-m-hide",e),s('[data-m-option="advanced"][data-m-group="'+s(this).data("m-target")+'"][data-m-deps="1"]').fadeToggle().toggleClass("m-highlight")}),s(".m-unveil").on("click",function(o){var e=s(this);e.nextAll().toggleClass("hidden").promise().done(function(){(e.next().is(":visible")?e.find("span").html(e.attr("data-hide")):e.find("span").html(e.attr("data-show"))).toggleClass("close")})}),s(".m-option input").on("change input",function(){s(this).closest(".m-card").prevAll(".m-card-header:first").find(".m-card-header__actions .m-button-save").prop("disabled",!1).addClass("is-primary")});function e(e=!1){e||(s("#molongui-options").attr("style","opacity: 0.35"),s("#m-options-saving").fadeIn()),t={},s(".m-option input, .m-option textarea, .m-option select").each(function(){var o;s(this).is("input[type=text]")||s(this).is("input[type=number]")||s(this).is("textarea")||s(this).is("input[type=hidden]")||s(this).is("select")?(o=s(this).val(),s.isArray(o)&&(o=o.toString()),t[s(this).attr("id")]=o):s(this).is("input[type=checkbox]:checked")?t[s(this).attr("id")]=1:s(this).is("input[type=checkbox]")?t[s(this).attr("id")]=null:s(this).is("input[type=radio]:checked")&&(t[s(this).attr("data-id")]=s(this).val())});var t,o=t;jQuery.post(ajaxurl,{action:molongui_contributors_options_params.plugin_id+"_save_options",data:o,nonce:s("#mfw_save_options_nonce").val()},function(o){s("input, textarea").each(function(){s(this).attr("disabled","disabled")}),e||(("false"!==o?(s("#m-options-saving").fadeOut(),s("#m-options-saved")):(s("#m-options-saving").fadeOut(),s("#m-options-error"))).fadeIn(),setTimeout(function(){s(window).off("beforeunload"),"false"!==o?(s("#m-options-saved").fadeOut(),s(".m-card-header__actions .m-button-save").blur().prop("disabled",!0).removeClass("is-primary")):s("#m-options-error").fadeOut(),s("input, textarea").each(function(){s(this).removeAttr("disabled")}),s("#molongui-options").removeAttr("style"),s(document).trigger("m_settings_saved")},1500))})}s(".m-button-save").on("click",function(o){o.preventDefault(),e(!1)}),s(document).on("keydown",function(o){return"s"!==o.key&&"S"!==o.key||!o.ctrlKey&&!o.metaKey||(o.preventDefault(),e(!1),!1)}),s("input, textarea, select").on("change",function(){s(window).on("beforeunload",function(o){return molongui_contributors_options_params[10003]})})}(jQuery),function(i){i(window).load(function(){i(".colorpicker").wpColorPicker()}),i(function(){var o=i("#post_template_override");o.on("myload change",function(o){var e,t;i(this).is(":checked")?i(this).closest(t=void 0===t?".m-card":t).nextAll().removeClass("disabled"):i(this).closest(e=void 0===e?".m-card":e).nextAll().addClass("disabled")}),o.trigger("myload")})}(jQuery);